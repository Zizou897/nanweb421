{% extends 'base/base.html' %}
{% load static %}
{% block content %}


    <div id="dataArt">
        <section class="welcome-blog-post-slide owl-carousel">
            <!-- Single Blog Post -->          
            <!-- Single Blog Post -->
            <div  v-for="art in article" class="single-blog-post-slide bg-img background-overlay-5" v-bind:style="{ backgroundImage: 'url(' + art.picture + ')' }">
                <!-- Single Blog Post Content -->
                <div class="single-blog-post-content">
                    <div class="tags">
                        <a href="{% url 'catagory' %}">%{art.category.name}</a>
                    </div>
                    <h3><a href="{% url 'detail' %}" class="font-pt">%{art.title}</a></h3>
                    <div class="date">
                        <a href="#">%{art.id}</a>
                    </div>
                </div>
            </div>
            <!-- Single Blog Post -->
            <!-- Single Blog Post -->
        </section>
        <!-- Welcome Blog Slide Area End -->


        <!-- Latest News Marquee Area Start -->
        <div class="latest-news-marquee-area">
            <div class="simple-marquee-container">
                <div class="marquee">
                    <ul class="marquee-content-items">
                        <li v-for="text in textBar">
                            <a href="#"><span class="latest-news-time">10h40</span>%{text.title}</a>
                        </li>
                        {% comment %} <li>
                            <a href="#"><span class="latest-news-time">11:02</span> Opinion: It's time to start talking about impeachment</a>
                        </li>
                        <li>
                            <a href="#"><span class="latest-news-time">12:37</span> Clinton aims to shore up Wisconsin with new TV ads</a>
                        </li>
                        <li>
                            <a href="#"><span class="latest-news-time">13:59</span> Trump signs tax bill before leaving for Mar-a-Lago</a>
                        </li> {% endcomment %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- Latest News Marquee Area End -->

    <!-- Main Content Area Start -->
    <section class="main-content-wrapper section_padding_100">
        <div class="container">
            <div class="row">
                <div id="articlePhare" class="col-12 col-lg-9">
                    <!-- Gazette Welcome Post -->
                    <div v-for="popular in popularArticle" class="gazette-welcome-post">
                        <!-- Post Tag -->
                        <div class="gazette-post-tag">
                            <a href="{% url 'catagory' %}">%{popular.category.name}</a>
                        </div>
                        <a :href="'/detail/' + popular.id + '/'"><h2 class="font-pt">%{popular.title}</h2></a>
                        <p class="gazette-post-date">%{popular.datePublication}</p>
                        <!-- Post Thumbnail -->
                        <div class="blog-post-thumbnail my-5">
                            <img :src="popular.picture" alt="post-thumb">
                        </div>
                        <!-- Post Excerpt -->
                        <p v-html="$options.filters.truncate_data(popular.description, 200)"></p>
                        <!-- Reading More -->
                        <div class="post-continue-reading-share d-sm-flex align-items-center justify-content-between mt-30">
                            <div class="post-continue-btn">
                                <a :href="'/detail/' + popular.id + '/'" class="font-pt">Lire plus<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
                            </div>
                            <!-- <div class="post-share-btn-group">
                                <a href="#"><i class="fa fa-pinterest" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                            </div> -->
                        </div>
                    </div>

                    <div id="Popular" class="gazette-todays-post section_padding_100_50">
                        <div class="gazette-heading">
                            <h4>Les Plus Populaires</h4>
                        </div>
                        <!-- Single Today Post -->
                        <div  class="gazette-single-todays-post d-md-flex align-items-start mb-50">
                            <div class="todays-post-thumb">
                                <img src="{% static 'assets/img/blog-img/2.jpg' %}" alt="">
                            </div>
                            <div class="todays-post-content">
                                <!-- Post Tag -->
                                <div class="gazette-post-tag">
                                    <a href="{% url 'catagory' %}"></a>
                                </div>
                                <h3><a href="{% url 'detail' %}" class="font-pt mb-2">$250-million mansion is most expensive</a></h3>
                                <span class="gazette-post-date mb-2">March 29, 2016</span>
                                
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ultrices egestas nunc, quis venenatis orci tincidunt id. Fusce commodo blandit eleifend. Nullam viverra tincidunt dolor, at pulvinar dui. Nullam at risus ut ipsum viverra posuere.</p>
                            </div>
                        </div>
                        <!-- Single Today Post -->
                        <div class="gazette-single-todays-post d-md-flex align-items-start mb-50">
                            <div class="todays-post-thumb">
                                <img src="{% static 'assets/img/blog-img/3.jpg' %}" alt="">
                            </div>
                            <div class="todays-post-content">
                                <!-- Post Tag -->
                                <div class="gazette-post-tag">
                                    <a href="#">Life</a>
                                </div>
                                <h3><a href="{% url 'detail' %}" class="font-pt mb-2">Homeless man steals $350,000 </a></h3>
                                <p class="gazette-post-date mb-2">March 29, 2016</p>
                                <a href="#" class="post-total-comments">3 Comments</a>
                                <p>Aliquam quis convallis enim. Nunc pulvinar molestie sem id blandit. Nunc venenatis interdum mollis. Aliquam finibus nulla quam, a iaculis justo finibus non. Suspendisse in fermentum nunc.</p>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="col-12 col-lg-3 col-md-6">
                    <div class="sidebar-area">
                        <!-- Breaking News Widget -->
                        <div class="breaking-news-widget">
                            <div class="widget-title">
                                <h5>breaking news</h5>
                            </div>
                            <!-- Single Breaking News Widget -->
                            <!-- <div class="single-breaking-news-widget">
                                <img src="{% static 'assets/img/blog-img/bn-1.jpg' %}" alt="">
                                <div class="breakingnews-title">
                                    <p>breaking news</p>
                                </div>
                                <div class="breaking-news-heading gradient-background-overlay">
                                    <h5 class="font-pt">China leads new global skyscraper record</h5>
                                </div> -->
                            </div>
                            <!-- Single Breaking News Widget -->
                            <div class="single-breaking-news-widget">
                                <img src="{% static 'assets/img/blog-img/bn-2.jpg' %}" alt="">
                                <div class="breakingnews-title">
                                    <p>télévision</p>
                                </div>
                                <div class="breaking-news-heading gradient-background-overlay">
                                    <h5 class="font-pt">Can a zebra crossing change its stripes?</h5>
                                </div>
                            </div>
                        </div>

                        <!-- Don't Miss Widget -->
                        <div id="dataArtThree" class="donnot-miss-widget">
                            <div class="widget-title">
                                <h5>à voir</h5>
                            </div>
                            <!-- Single Don't Miss Post -->
                            <div v-for="arti in article" class="single-dont-miss-post d-flex mb-30">
                                <div class="dont-miss-post-thumb">
                                    <img :src="arti.picture" alt="">
                                </div>
                                <div class="dont-miss-post-content">
                                    <a href="#" class="font-pt">%{arti.title}</a>
                                    <span>%{arti.datePublication}</span>
                                </div>
                            </div>
                            <!-- Single Don't Miss Post -->
                            {% comment %} <div class="single-dont-miss-post d-flex mb-30">
                                <div class="dont-miss-post-thumb">
                                    <img src="{% static 'assets/img/blog-img/dm-2.jpg' %}" alt="">
                                </div>
                                <div class="dont-miss-post-content">
                                    <a href="#" class="font-pt">A new way to travel the world</a>
                                    <span>March 29, 2016</span>
                                </div>
                            </div> {% endcomment %}
                            <!-- Single Don't Miss Post -->
                            {% comment %} <div class="single-dont-miss-post d-flex mb-30">
                                <div class="dont-miss-post-thumb">
                                    <img src="{% static 'assets/img/blog-img/dm-3.jpg' %}" alt="">
                                </div>
                                <div class="dont-miss-post-content">
                                    <a href="#" class="font-pt">Why choose a bank?</a>
                                    <span>March 29, 2016</span>
                                </div>
                            </div> {% endcomment %}
                        </div>
                        <!-- Advert Widget -->
                        <div class="advert-widget">
                            <div class="widget-title">
                                <h5>A propos</h5>
                            </div>
                            <div class="advert-thumb mb-30">
                                <a href="{% url 'about' %}"><img src="{% static 'assets/img/equipe.png' %}" alt=""></a>
                            </div>
                        </div>
                        <!-- Subscribe Widget -->
                        <div class="subscribe-widget">
                            <div class="widget-title">
                                <h5>subscribe</h5>
                            </div>
                            <div id="register" class="subscribe-form">
                                <form action="#">
                                {% csrf_token %}
                                    <input type="email" v-model="email" name="email" id="subs_email" placeholder="Votre Email">
                                    <button @click.prevent="registersEmail" type="submit">S'abonner</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Main Content Area End -->

        <!-- Catagory Posts Area Start -->
        <div class="gazette-catagory-posts-area">
            <div class="container">
                <div class="row">
                    <div id="title1" class="col-12 col-md-4">
                        <!-- Single Catagory Post -->
                        <div class="gazette-single-catagory-post">
                            <div class="single-catagory-post-thumb mb-15">
                                <img src="{% static 'assets/img/blog-img/12.jpg' %}" alt="">
                            </div>
                            <!-- Post Tag -->
                            <div class="gazette-post-tag">
                                <a href="#">Video</a>
                            </div>
                            <h5><a href="#" class="font-pt">Save the eniroment with this step</a></h5>
                            <span>Nov 29, 2017</span>
                        </div>
                        <!-- Single Catagory Post -->
                        <div v-for="tit_art in article_title" class="gazette-single-catagory-post">
                            <h5><a href="#" class="font-pt">%{tit_art.title}</a></h5>
                            <span>%{tit_art.datePublication}</span>
                        </div>
                        <!-- Single Catagory Post -->
                       
                    </div>
                    <div class="col-12 col-md-4">
                        <div id="Autre" class="row">
                            <div v-for="autre in author_article" class="col-12 col-md-6">
                                <!-- Single Catagory Post -->
                                <div class="gazette-single-catagory-post">
                                    <div class="single-catagory-post-thumb mb-15">
                                        <img :src="autre.picture" alt="">
                                    </div>
                                    <!-- Post Tag -->
                                    <div class="gazette-post-tag">
                                        <a href="#">%{autre.category.name}</a>
                                    </div>
                                    <h5><a href="#" class="font-pt">%{autre.title}</a></h5>
                                    <span>%{autre.datePublication}</span>
                                </div>
                            </div>
                            {% comment %} <div class="col-12 col-md-6">
                                <!-- Single Catagory Post -->
                                <div class="gazette-single-catagory-post">
                                    <div class="single-catagory-post-thumb mb-15">
                                        <img src="{% static 'assets/img/blog-img/15.jpg' %}" alt="">
                                    </div>
                                    <!-- Post Tag -->
                                    <div class="gazette-post-tag">
                                        <a href="#">Video</a>
                                    </div>
                                    <h5><a href="#" class="font-pt">Get this good feeling about life</a></h5>
                                    <span>Nov 29, 2017</span>
                                </div>
                            </div> {% endcomment %}
                            {% comment %} <div class="col-12 col-md-6">
                                <!-- Single Catagory Post -->
                                <div class="gazette-single-catagory-post">
                                    <div class="single-catagory-post-thumb mb-15">
                                        <img src="{% static 'assets/img/blog-img/16.jpg' %}" alt="">
                                    </div>
                                    <!-- Post Tag -->
                                    <div class="gazette-post-tag">
                                        <a href="#">Interview</a>
                                    </div>
                                    <h5><a href="#" class="font-pt">Get this good feeling about life</a></h5>
                                    <span>Nov 29, 2017</span>
                                </div>
                            </div> {% endcomment %}
                            {% comment %} <div class="col-12 col-md-6">
                                <!-- Single Catagory Post -->
                                <div class="gazette-single-catagory-post">
                                    <div class="single-catagory-post-thumb mb-15">
                                        <img src="{% static 'assets/img/blog-img/17.jpg' %}" alt="">
                                    </div>
                                    <!-- Post Tag -->
                                    <div class="gazette-post-tag">
                                        <a href="#">Video</a>
                                    </div>
                                    <h5><a href="#" class="font-pt">11 hottest toys for this holiday season</a></h5>
                                    <span>Nov 29, 2017</span>
                                </div>
                            </div> {% endcomment %}
                        </div>
                    </div>
                    <div id="title2" class="col-12 col-md-4">
                        <!-- Single Catagory Post -->
                        <div class="gazette-single-catagory-post">
                            <div class="single-catagory-post-thumb mb-15">
                                <img src="{% static 'assets/img/blog-img/13.jpg' %}" alt="">
                            </div>
                            <!-- Post Tag -->
                            <div class="gazette-post-tag">
                                <a href="#">Video</a>
                            </div>
                            <h5><a href="#" class="font-pt">10 Bills that the Congress in voting</a></h5>
                            <span>Nov 29, 2017</span>
                        </div>
                        <!-- Single Catagory Post -->
                        <div v-for="title_art in article_title" class="gazette-single-catagory-post">
                            <h5><a href="#" class="font-pt">%{title_art.title}</a></h5>
                            <span>%{title_art.datePublication}</span>
                        </div>
                        <!-- Single Catagory Post -->
                        {% comment %} <div class="gazette-single-catagory-post">
                            <h5><a href="#" class="font-pt">Save the eniroment with this step</a></h5>
                            <span>Nov 29, 2017</span>
                        </div>
                        <!-- Single Catagory Post -->
                        <div class="gazette-single-catagory-post">
                            <h5><a href="#" class="font-pt">Protest to be anounced in January</a></h5>
                            <span>Nov 29, 2017</span>
                        </div> {% endcomment %}
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Catagory Posts Area End -->

    <!-- Video Posts Area Start -->
    {% comment %} <section class="gazatte-video-post-area section_padding_100_70 bg-gray">
        <div class="container">
            <div class="row">
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/4.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">Show suspended by PBS amid misconduct allegations</a></h5>
                    </div>
                </div>
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/5.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">Parents to Congress</a></h5>
                    </div>
                </div>
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/6.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">Third Buy Alert for This “Millionaire Maker” Stock</a></h5>
                    </div>
                </div>
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/7.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">The Chicago Mercantile Exchange is set to begin</a></h5>
                    </div>
                </div>
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/8.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">Trading bitcoin futures</a></h5>
                    </div>
                </div>
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/9.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">Are ‘Micro-Mansions’ the Next Big Thing?</a></h5>
                    </div>
                </div>
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/10.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">McKinney’s target market</a></h5>
                    </div>
                </div>
                <!-- Single Video Post Start -->
                <div class="col-12 col-md-3">
                    <div class="single-video-post">
                        <div class="video-post-thumb">
                            <img src="{% static 'assets/img/blog-img/11.jpg' %}" alt="">
                            <a href="https://youtu.be/dIyXl9ZHEgg" class="videobtn"><i class="fa fa-play" aria-hidden="true"></i></a>
                        </div>
                        <h5><a href="#">Australian Property Prices Remain Flat</a></h5>
                    </div>
                </div>
            </div>
        </div>
    </section> {% endcomment %}
    <!-- Video Posts Area End -->

    <!-- Editorial Area Start -->
    <section class="gazatte-editorial-area section_padding_100 bg-dark">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="editorial-post-slides owl-carousel">

                        <!-- Editorial Post Single Slide -->
                        <div class="editorial-post-single-slide">
                            <div class="row">
                                <div class="col-12 col-md-5">
                                    <div class="editorial-post-thumb">
                                        <img src="{% static 'assets/img/blog-img/bitcoin.jpg' %}" alt="">
                                    </div>
                                </div>
                                <div class="col-12 col-md-7">
                                    <div class="editorial-post-content">
                                        <!-- Post Tag -->
                                        <div class="gazette-post-tag">
                                            <a href="#">Editorial</a>
                                        </div>
                                        <h2><a href="#" class="font-pt mb-15">Move over, bitcoin. <br>Here comes litecoin</a></h2>
                                        <p class="editorial-post-date mb-15">March 29, 2016</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ultrices egestas nunc, quis venenatis orci tincidunt id. Fusce commodo blandit eleifend. Nullam viverra tincidunt dolor, at pulvinar dui. Nullam at risus ut ipsum viverra posuere. Aliquam quis convallis enim. Nunc pulvinar molestie sem id blandit. Nunc venenatis interdum mollis...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Editorial Post Single Slide -->
                        <div class="editorial-post-single-slide">
                            <div class="row">
                                <div class="col-12 col-md-5">
                                    <div class="editorial-post-thumb">
                                        <img src="{% static 'assets/img/blog-img/bitcoin.jpg' %}" alt="">
                                    </div>
                                </div>
                                <div class="col-12 col-md-7">
                                    <div class="editorial-post-content">
                                        <!-- Post Tag -->
                                        <div class="gazette-post-tag">
                                            <a href="#">Editorial</a>
                                        </div>
                                        <h2><a href="#" class="font-pt mb-15">Move over, bitcoin. <br>Here comes litecoin</a></h2>
                                        <p class="editorial-post-date mb-15">March 29, 2016</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ultrices egestas nunc, quis venenatis orci tincidunt id. Fusce commodo blandit eleifend. Nullam viverra tincidunt dolor, at pulvinar dui. Nullam at risus ut ipsum viverra posuere. Aliquam quis convallis enim. Nunc pulvinar molestie sem id blandit. Nunc venenatis interdum mollis...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Editorial Post Single Slide -->
                        <div class="editorial-post-single-slide">
                            <div class="row">
                                <div class="col-12 col-md-5">
                                    <div class="editorial-post-thumb">
                                        <img src="{% static 'assets/img/blog-img/bitcoin.jpg' %}" alt="">
                                    </div>
                                </div>
                                <div class="col-12 col-md-7">
                                    <div class="editorial-post-content">
                                        <!-- Post Tag -->
                                        <div class="gazette-post-tag">
                                            <a href="#">Editorial</a>
                                        </div>
                                        <h2><a href="#" class="font-pt mb-15">Move over, bitcoin. <br>Here comes litecoin</a></h2>
                                        <p class="editorial-post-date mb-15">March 29, 2016</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ultrices egestas nunc, quis venenatis orci tincidunt id. Fusce commodo blandit eleifend. Nullam viverra tincidunt dolor, at pulvinar dui. Nullam at risus ut ipsum viverra posuere. Aliquam quis convallis enim. Nunc pulvinar molestie sem id blandit. Nunc venenatis interdum mollis...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Editorial Post Single Slide -->
                        <div class="editorial-post-single-slide">
                            <div class="row">
                                <div class="col-12 col-md-5">
                                    <div class="editorial-post-thumb">
                                        <img src="{% static 'assets/img/blog-img/bitcoin.jpg' %}" alt="">
                                    </div>
                                </div>
                                <div class="col-12 col-md-7">
                                    <div class="editorial-post-content">
                                        <!-- Post Tag -->
                                        <div class="gazette-post-tag">
                                            <a href="#">Editorial</a>
                                        </div>
                                        <h2><a href="#" class="font-pt mb-15">Move over, bitcoin. <br>Here comes litecoin</a></h2>
                                        <p class="editorial-post-date mb-15">March 29, 2016</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ultrices egestas nunc, quis venenatis orci tincidunt id. Fusce commodo blandit eleifend. Nullam viverra tincidunt dolor, at pulvinar dui. Nullam at risus ut ipsum viverra posuere. Aliquam quis convallis enim. Nunc pulvinar molestie sem id blandit. Nunc venenatis interdum mollis...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Editorial Area End -->
{% endblock content %}


{% block vuejs %}
    <script>
{% comment %} 
        Vue.filter('truncate_article', function (value, length) {
            if (!value){
                return ''
            }
            value = value.toString()
            if(value.length > length){
                return value.substring(0, length) + "..."
            }
            else{
                return value
            }
        }) {% endcomment %}

        // from recent article the most views
        new Vue({
            el: "#dataArtThree",
            data:{
                article: []
            },
            delimiters: ['%{', '}'],
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        recentArticles{
                            id
                            title
                            picture
                            description
                            category{
                                id
                                name
                            }
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.article = response.data.data?.recentArticles
                    })
            }
    
        })


        // Diferents article in the slider 
        // from recent article 

        new Vue({
            el: "#dataArt",
            data:{
                article: [],
                textBar: []
            },
            delimiters: ['%{', '}'],
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        recentArticlesTitle{
                            id
                            title
                            datePublication
                        },
                        recentArticles{
                            id
                            title
                            picture
                            description
                            category{
                                id
                                name
                            }
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.article = response.data.data?.recentArticles
                        this.textBar = response.data.data?.recentArticlesTitle
                        setTimeout(this.refresh_reload, 1500);
    
                    })
            }
    
        })

        new Vue({
            el: "#section_article_slider",
            data:{
                popularArticle: [],
                
            },
            delimiters: ['%{', '}'],
            directives: {},
            filters: {
                truncate_data: function(data,num){
                    let value = he.decode(data)
                    const reqdString = 
                    value.split("").slice(0, num).join("") + '...';
                    return reqdString;
                },
            },
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        popularArticles{
                            id
                            title
                            picture
                            description
                            datePublication
                            category{
                                id
                                name
                            }
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.popularArticle = response.data.data?.popularArticles
                    })
            }
        })
    
    //---------------the differents article in the slider---------------


        //article phare 
        new Vue({
            el: "#articlePhare",
            data:{
                popularArticle: [],
                articles_test_list: [],
            },
            delimiters: ['%{', '}'],
            directives: {},
            filters: {
                truncate_data: function(data,num){
                    let value = he.decode(data)
                    const reqdString = 
                    value.split("").slice(0, num).join("") + '...';
                    return reqdString;
                },
            },
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        popularArticles{
                            id
                            title
                            picture
                            description
                            datePublication
                            category{
                                id
                                name
                            }
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.popularArticle = response.data.data?.popularArticles
                    })
            }
        })

        // the most popular article

        new Vue({
            el: "#Popular",
            data:{
                popular_articles: []
            },
            delimiters: ['%{', '}'],
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        popularArticles{
                            id
                            title
                            picture
                            description
                            datePublication
                            category{
                                id
                                name
                            }
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.popular_articles = response.data.data?.popularArticles
                    })
            }
    
        })
  
        // the differents middle's article (4)
        new Vue({
            el: "#Autre",
            data:{
                author_article: [],
                articles_test_list: [],
            },
            delimiters: ['%{', '}'],
            directives: {},
            filters: {
                truncate_data: function(data,num){
                    let value = he.decode(data)
                    const reqdString = 
                    value.split("").slice(0, num).join("") + '...';
                    return reqdString;
                },
            },
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        recentArticles{
                            id
                            title
                            picture
                            datePublication
                            category{
                                id
                                name
                            }
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.author_article = response.data.data?.recentArticles
                    })
            }
        })


        //---------------the differents title---------------

        new Vue({
            el: "#title1",
            data:{
                article_title: [],
            },
            delimiters: ['%{', '}'],
            directives: {},
            filters: {
                truncate_data: function(data,num){
                    let value = he.decode(data)
                    const reqdString = 
                    value.split("").slice(0, num).join("") + '...';
                    return reqdString;
                },
            },
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        recentArticlesTitle{
                            id
                            title
                            datePublication
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.article_title = response.data.data?.recentArticlesTitle
                    })
            }
        })

        new Vue({
            el: "#title2",
            data:{
                article_title: [],
            },
            delimiters: ['%{', '}'],
            directives: {},
            filters: {
                truncate_data: function(data,num){
                    let value = he.decode(data)
                    const reqdString = 
                    value.split("").slice(0, num).join("") + '...';
                    return reqdString;
                },
            },
            mounted(){
                axios.post("http://nannews.herokuapp.com/graphql", {
                    query: `
                        {
                        recentArticlesTitle{
                            id
                            title
                            datePublication
                        }
                    }`
                    }, 
                    {
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    }
                    ).then((response)=>{
                        console.log(response)
                        this.article_title = response.data.data?.recentArticlesTitle
                    })
            }
        })

        //---------------the same things---------------

        //Email confirm 

        new Vue(
            {
            el:'#register',
            data:{
                email:'',
                
            },
            methods:{
            registersEmail(){
                if(!this.email){
                    swal.fire({
                        icon:'error',
                        text: 'veuillez remplir ce champ avant de le soumettre !!!',
                        showConfirmButton: false,
                        timer: 2000
                    })
                }
                else if (!/(\w\.?)+@(\w\.?)+\.[A-Za-z]{2,3}/.test(this.email)){
                    swal.fire({
                        icon: 'error',
                        text: 'Email invalide',
                        showConfirmButton: false,
                        timer: 2000
                    })
                }
                else{

                    let form = new FormData()
                    form.append('email', JSON.stringify(this.email))

                    axios.defaults.xsrfCookieName = 'XSRF-TOKEN'
                    axios.defaults.xsrfHeaderName = 'X-XSRF-TOKEN'
                    axios.post("{% url 'registerEmail' %}", form)
                    .then((response) =>{
                        if(response.data.success){
                            swal.fire({
                                icon:'success',
                                text: response.data.msg,
                                showConfirmButton: false,
                                timer: 2000
                            })
                            this.email = ""
                        }
                        else{
                            swal.fire({
                                icon:'error',
                                text: response.data.msg,
                                showConfirmButton: false,
                                timer: 2000
                            })
                        }
                    })
                    .catch((e) => {
                        console.log(e)
                    })
                }
            },

          },
          delimiters: ['%{', '}']
        }
      )


    </script>

    {% endblock vuejs %}
